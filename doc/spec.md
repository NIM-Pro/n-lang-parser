# Спецификация

Перед вами спецификация языка N (далее - язык).
В этом документе будут рассмотрены такие вещи как синтаксис, структура текстов и программ, составленных на языке.

Язык N - язык программирования общего назначения. Из этого следует, что он должен обладать полнотой по Тьюрингу, т.е. на нём можно написать любую вычислимую функцию.
Так же, язык N - императивный. Это означает, что все алгоритмы, которые можно описать на этом языке, должны описываться в виде конечной последовательности инструкций действия.

## Структура программы

Исходный текст программы состоит из файлов, содержащих текст на языке N, каждый из которых представляет собой самостоятельный модуль.

### Главный модуль

Среди модулей должен присутствовать главный или корневой модуль - модуль, в котором описана функция main, являющаяся точкой входа в программу.

Точка входа должна иметь декларацию вида `() => void`.

### Соединение модулей

Разбиение программы на модули не имело бы смысла без механизма заимствования функционала.

Модуль поставляет функции, константы и определения при помощи конструкции `export`.
Типичным примером его использования будет
`export function default() {}`.

Чтобы заимствовать функционал других модулей код модуля должен содержать конструкцию `import`.
Пример: `import * from './mod'`.

### Структура модуля

Модуль состоит из:
* определений
	* пользовательских типов
	* шаблонов
	* внешних функций
* реализаций
	* функций
	* констант

### Что происходит с модулем во время компиляции?

Модуль анализируется и затем упаковывается. Так, отслеживая изменения в исходном тексте программы, компилятор переупаковывает только изменившиеся модули. Это ускоряет его работу.

Упакованный модуль может быть скопирован для компиляции на другой машине (операционной системе), но это не рекомендуется из-за нестабильности этого API.

**Важно!** Функции, у которых вывод типов не был завершён из-за неполноты условий, либо из-за намеренной их параметризации, упаковываются в виде определений, а не реализаций.

После упаковки всех задействованных модулей, компилятор собирает программу воедино и начинает следующий цикл её анализа.

## Определения

### Пользовательские (составные) типы

Для описания собственных структур данных программист должен использовать механизм описания пользовательских типов. Структура описания типа выглядит следующим образом:
```
"class" $ИмяТипа: Идентификатор "{"
	(
		МодификаторДоступа
		ОпределениеСоставляющейТипа
	)*
"}"
```

Здесь символ `*` означает `ноль, либо больше элементов`. Для подробного объяснения схемы синтаксиса языка рекомендуется обратиться к документу `syntax.md`.